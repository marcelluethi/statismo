set( HDF5_VERSION "1.8.9" )

if(WIN32)
  set(HDF5_BUILD_SHARED OFF)
  set(HDF5_BUILD_TYPE "RELEASE" CACHE STRING "Build type (RELEASE DEBUG) of the hdf5 library" )
else(WIN32)
  set(HDF5_BUILD_SHARED ON)
  set(HDF5_BUILD_TYPE "RELEASE")
endif(WIN32)

ExternalProject_add( HDF5
  SOURCE_DIR ${CMAKE_BINARY_DIR}/HDF5
  BINARY_DIR ${CMAKE_BINARY_DIR}/HDF5-build
  URL "http://www.hdfgroup.org/ftp/HDF5/releases/hdf5-${HDF5_VERSION}/src/hdf5-${HDF5_VERSION}.tar.gz"
  UPDATE_COMMAND ""
  CMAKE_ARGS
    -DCMAKE_BUILD_TYPE:STRING=${HDF5_BUILD_TYPE}
    -DHDF5_ENABLE_Z_LIB_SUPPORT:BOOL=OFF
    -DHDF5_BUILD_CPP_LIB:BOOL=ON
    -DBUILD_SHARED_LIBS:BOOL=${HDF5_BUILD_SHARED}
    -DHDF5_BUILD_TOOLS:BOOL=OFF
    -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_BINARY_DIR}/3rdParty/
  INSTALL_DIR ${CMAKE_BINARY_DIR}/3rdParty/
)

set( HDF5_DIR ${CMAKE_BINARY_DIR}/3rdParty/share/cmake/hdf5/ )
